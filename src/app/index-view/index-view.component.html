<div class="container index-head" *ngIf="announcementHighlight">
    <div class="index-head-focus">
        <div class="index-head-highlight">
            <h1 [routerLink]="['/view', announcementHighlight.id]">{{announcementHighlight.title}}</h1>
            <p>{{announcementHighlight.description}}</p>
            <a class="small" [routerLink]="['/view', announcementHighlight.id]">READ MORE</a>
        </div>
    </div>
    <ul class="index-head-list">
        <li *ngFor="let announcement of announcementsSliced" [routerLink]="['/view', announcement.id]">{{announcement.title}}</li>
    </ul>
</div>
<div class="container index-body">
    <div class="index-body-categories">
        <h3 class="heading">Categories</h3>
        <ul class="index-body-categories-list">
            <li *ngFor="let category of categories" (click)="switchCategoryFilter(category.id)" [class.active]="categoryFilter === category.id">{{category.name}}</li>
            <li *ngIf="categoryFilter" (click)="switchCategoryFilter(0)">View All</li>
        </ul>
        <br>
        <small routerLink="/view/archived" style="display: inline-block; padding: 10px 10px; cursor: pointer; color: #999;" *ngIf="announcements.length">View Archive</small>
    </div>

    <div class="index-body-announcements">
        <div *ngFor="let category of categories">
            <div *ngIf="!sortedAnnouncements[category.slug].length && category.id === categoryFilter">
                <br>
                <td-message *ngIf="!sortedAnnouncements[category.slug].length && category.id === categoryFilter" label="Notice" sublabel="Could not find an announcement with the selected category. Please try again by selecting another category." color="primary" icon="warning" style="padding: 16px 5px;"></td-message>
            </div>
            <div *ngIf="(category.id === categoryFilter || !categoryFilter) && sortedAnnouncements[category.slug].length">
                <h2 style="padding: 10px 20px;">{{category.name}}</h2>
                <div *ngFor="let announcement of sortedAnnouncements[category.slug]">
                    <span>{{announcement.name}}</span>
                    <app-announcement mode="compact" [announcement]="announcement" [routerLink]="['/view', announcement.id]"></app-announcement>
                </div>
            </div>
        </div>
    </div>
</div>
