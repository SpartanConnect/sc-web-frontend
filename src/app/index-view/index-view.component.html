<div class="container index-head" *ngIf="announcementHighlight">
    <div class="index-head-focus">
        <div class="index-head-highlight">
            <h1 [routerLink]="['/view', announcementHighlight.id]">{{announcementHighlight.title}}</h1>
            <p>{{announcementHighlight.description}}</p>
            <a class="small" [routerLink]="['/view', announcementHighlight.id]">READ MORE</a>
        </div>
    </div>
    <ul class="index-head-list">
        <li *ngFor="let announcement of announcementsSliced" [routerLink]="['/view', announcement.id]">{{announcement.title}}</li>
    </ul>
</div>
<div class="container index-body">
    <div class="index-body-categories">
        <h3 class="heading">Categories</h3>
        <ul class="index-body-categories-list">
            <li *ngFor="let category of categories" (click)="switchCategoryFilter(category.id)" [class.active]="categoryFilter === category.id">{{category.name}}</li>
            <li *ngIf="categoryFilter" (click)="switchCategoryFilter(0)">View All</li>
        </ul>
        <br>
        <small routerLink="/view/archived" style="display: inline-block; padding: 10px 10px; cursor: pointer; color: #999;" *ngIf="announcements.length">View Archive</small>
    </div>

    <div class="index-body-announcements">
        <div *ngFor="let category of categories">
            <div *ngIf="!sortedAnnouncements[category.slug].length && category.id === categoryFilter">
                <br>
                <td-message *ngIf="!sortedAnnouncements[category.slug].length && category.id === categoryFilter" label="Notice" sublabel="Could not find an announcement with the selected category. Please try again by selecting another category." color="primary" icon="warning" style="padding: 16px 5px;"></td-message>
            </div>
            <div *ngIf="(category.id === categoryFilter || !categoryFilter) && sortedAnnouncements[category.slug].length">
                <h2 style="padding: 10px 20px;">{{category.name}}</h2>
                <md-card class="card-announcement" *ngFor="let announcement of sortedAnnouncements[category.slug]">
                    <md-card-header>
                        <div md-card-avatar class="example-header-image" style="background-image:url('http://via.placeholder.com/40/b71c1c/ffffff')"></div>
                        <md-card-title>{{announcement.creator.name}}</md-card-title>
                        <md-card-subtitle>created on {{announcement.timeSubmitted | timeAgo}}</md-card-subtitle>
                    </md-card-header>
                    <md-card-content>
                        <h3>{{announcement.title}}</h3>
                        <p>{{announcement.description}}</p>
                        <md-chip-list *ngIf="announcement.tags">
                            <md-chip *ngFor="let tag of announcement.tags">{{tag.name}} (#{{tag.slug}})</md-chip>
                        </md-chip-list>
                    </md-card-content>
                    <md-card-actions>
                        <button md-button [routerLink]="['/view', announcement.id]">READ MORE</button>
                    </md-card-actions>
                </md-card>
            </div>
        </div>
    </div>
</div>
